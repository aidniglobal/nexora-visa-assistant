{% extends 'base.html' %}

{% block content %}
<h2>Visa Document Requirements</h2>

<form method="GET" action="{{ url_for('visa_requirements') }}">
    <label for="country">Country</label>
    <select name="country" id="country" onchange="this.form.submit()">
        <option value="">-- Select country --</option>
        {% for c in countries %}
            <option value="{{ c }}" {% if c == selected_country %}selected{% endif %}>{{ c }}</option>
        {% endfor %}
    </select>

    {% if selected_country %}
        <label for="visa_type">Visa type</label>
        <select name="visa_type" id="visa_type" onchange="this.form.submit()">
            <option value="">-- Select visa type --</option>
            {% for vt in data[selected_country].keys() %}
                <option value="{{ vt }}" {% if vt == selected_visa_type %}selected{% endif %}>{{ vt.replace('_',' ').title() }}</option>
            {% endfor %}
        </select>
    {% endif %}
</form>

<hr>

{% if not selected_country %}
    <h3>Available countries</h3>
    <ul>
        {% for c in countries %}
            <li><a href="{{ url_for('visa_requirements') }}?country={{ c }}">{{ c }}</a></li>
        {% endfor %}
    </ul>
{% else %}
    <h3>Requirements for {{ selected_country }}{% if selected_visa_type %} â€” {{ selected_visa_type.replace('_',' ').title() }}{% endif %}</h3>

    {% if selected_visa_type %}
        <ol>
            {% for item in data[selected_country][selected_visa_type] %}
                <li>{{ item }}</li>
            {% endfor %}
        </ol>
    {% else %}
        {% for vt, items in data[selected_country].items() %}
            <h4>{{ vt.replace('_',' ').title() }}</h4>
            <ol>
                {% for item in items %}
                    <li>{{ item }}</li>
                {% endfor %}
            </ol>
        {% endfor %}
    {% endif %}

{% endif %}

{% endblock %}